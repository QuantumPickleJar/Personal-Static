<div id="projectModal" class="modal">
  <div class="modal-content" id="modalContent">
    <!-- Close button -->
    <span class="close-button" id="closeModal">&times;</span>

    <!-- Top Container: 40% height -->
    <div class="modal-top">
      <!-- Left 2/3: Title + Carousel/Images -->
      <div class="modal-top-left">
        <h4 id="modalTitle"></h4>
        <!-- Main image area (carousel or just a grid) -->
        <div id="modalImages" class="modal-images images-view">
          <!-- Image carousel view template -->
          <div id="projectImageCarousel" class="carousel slide" style="display: none;">
            <div class="carousel-inner">
              <!-- Images will be inserted here -->
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#projectImageCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#projectImageCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
          
          <!-- Fallback placeholder template -->
          <div class="fallback-placeholder" style="display: none; width: 250px; height: 250px;">
            <img src="" alt="Project placeholder">
          </div>
          
          <!-- Mermaid container template -->
          <div id="mermaidContainer" class="mermaid" style="display: none; overflow: visible;">
            <!-- Mermaid diagram will be rendered here -->
          </div>
          
          <!-- No mermaid template -->
          <div class="no-mermaid" style="display: none;">
            No Mermaid Diagram Available
          </div>
        </div>
      </div>

      <!-- Right 1/3: Split into two vertical sub-sections -->
      <div class="modal-top-right">
        <div class="modal-top-right-upper">
          <h3 class="modal-section-heading">Tech Stack</h3>
          <div id="modalStack" class="vertical-stack"></div>
        </div>
        <div class="modal-top-right-lower">
          <p id="projectStatus"></p>
          <p id="projectType"></p>
        </div>
        <!-- Static FAB container -->
        <div class="fab-container">
          <button class="fab toggle-images selected">
            <img src="rsc/images/fab-image-icon.png" alt="Images" style="width:24px; height:24px;">
          </button>
          <button class="fab toggle-mermaid">
            <img src="rsc/images/stack/MermaidJS.png" alt="Mermaid Diagram" />
          </button>
        </div>
      </div>
    </div>

    <!-- Bottom Container: 60% height -->
    <div class="modal-bottom">
      <div id="modalMetadata">
        <!-- Project status, date, description -->
        <p id="projectDates"></p>
        <p id="modalDescription"></p>
      </div>
    </div>
  </div>
</div>

<!-- Carousel item template -->
<template id="carouselItemTemplate">
  <div class="carousel-item">
    <a data-lightbox="carousel-images">
      <img class="d-block w-100" alt="">
    </a>
  </div>
</template>