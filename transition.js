const basePath=window.location.hostname.includes("github.io")?"/Personal-Static/":"/";function loadBarba(){const e=document.createElement("script");e.src="https://unpkg.com/@barba/core",e.onload=initBarba,e.onerror=()=>{console.error("Failed to load Barba.js. Falling back to normal page loads.")},document.head.appendChild(e)}function initBarba(){"undefined"!=typeof barba?(console.log("Initializing Barba.js transitions"),barba.init({debug:!0,transitions:[{name:"default-transition",leave:e=>new Promise((a=>{const t=e.current.container;t.classList.add("page-exit"),t.querySelector("#sidebar")&&t.querySelector("#sidebar").classList.contains("slide-left")&&t.querySelector("#sidebar").classList.remove("slide-left"),setTimeout(a,300)})),enter:e=>new Promise((a=>{const t=e.next.container;t.classList.add("page-enter"),setTimeout((()=>{if([{id:"headerContainer",path:"header.html"},{id:"sidebarContainer",path:"sidebar.html"},{id:"footerContainer",path:"footer.html"}].forEach((e=>{t.querySelector(`#${e.id}`)&&!t.querySelector(`#${e.id}`).innerHTML.trim()&&(console.log(`Loading partial ${e.path} after transition`),window.loadPartial(e.id,e.path))})),t.classList.remove("page-enter"),window.location.pathname.includes("projects.html")){console.log("Barba transition to projects page detected, checking if projects need initialization");const e=t.querySelector("#projectsGallery");if(e&&(!e.innerHTML||""===e.innerHTML.trim())){console.log("Projects gallery is empty, triggering initialization");const e=new CustomEvent("initializeProjects");document.dispatchEvent(e)}}a()}),300)}))}]}),barba.hooks.after((()=>{console.log("Barba after hook: ensuring partials are loaded"),[{id:"headerContainer",path:"header.html"},{id:"sidebarContainer",path:"sidebar.html"},{id:"footerContainer",path:"footer.html"}].forEach((e=>{const a=document.querySelector(`#${e.id}`);a&&!a.innerHTML.trim()&&(console.log(`Loading partial ${e.path} after Barba transition complete`),window.loadPartial(e.id,e.path))}))})),barba.hooks.after((e=>{if(console.log("Barba after hook: ensuring partials are loaded"),[{id:"headerContainer",path:"header.html"},{id:"sidebarContainer",path:"sidebar.html"},{id:"footerContainer",path:"footer.html"}].forEach((e=>{const a=document.querySelector(`#${e.id}`);if(a&&!a.innerHTML.trim()){console.log(`Loading partial ${e.path} after Barba transition complete`);try{window.loadPartial(e.id,e.path)}catch(a){console.error(`Failed to load partial: ${e.path}`,a)}}})),window.location.pathname.includes("projects.html")){console.log("On projects page, ensuring projects module is loaded");const e=document.getElementById("projectsGallery");if(e&&(!e.children.length||e.innerHTML.includes("error")||e.innerHTML.includes("failed"))){console.log("Projects not loaded correctly, attempting reload"),e.innerHTML='<div class="loading">Loading projects...</div>';const a=window.location.hostname.includes("github.io")?"/Personal-Static/":"/";import(`${a}rsc/js/projects.js`).then((e=>e.loadProjects().then((a=>{e.renderProjectsGallery(a)})))).catch((a=>{console.error("Final attempt to load projects failed:",a),e.innerHTML=`<div class="error">Failed to load projects: ${a.message}</div>`,(e.innerHTML.includes("error")||e.innerHTML.includes("failed"))&&(console.warn("Forcing page reload as last resort"),setTimeout((()=>window.location.reload()),500))}))}}}))):console.error("Barba.js still not available after loading attempt.")}document.addEventListener("DOMContentLoaded",(()=>{"undefined"==typeof barba?(console.warn("Barba.js is not loaded. Loading it dynamically..."),loadBarba()):initBarba()})),window.loadPartial=async function(e,a){try{const t=window.location.hostname.includes("github.io")?"/Personal-Static/":"/",o=await import(`${t}main.js`);if(o&&"function"==typeof o.loadPartial)await o.loadPartial(e,a);else{console.log(`Fallback: Loading partial ${a} into ${e}`);const t=await fetch(`partials/${a}`,{cache:"no-store"});if(!t.ok)throw new Error(`Failed to load partial ${a}`);{const a=await t.text(),o=document.getElementById(e);o&&(o.innerHTML=a,setTimeout((()=>{o.classList.contains("slide-left")&&o.classList.remove("slide-left"),o.classList.add("loaded")}),100))}}}catch(t){console.error("Error in window.loadPartial:",t);const o=document.getElementById(e);o&&(o.innerHTML=`<div class="error-partial">Failed to load ${a}.</div>`)}};