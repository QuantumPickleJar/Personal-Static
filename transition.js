const basePath=window.location.hostname.includes("github.io")?"/Personal-Static/":"/";function loadBarba(){const a=document.createElement("script");a.src="https://unpkg.com/@barba/core",a.onload=initBarba,a.onerror=()=>{console.error("Failed to load Barba.js. Falling back to normal page loads.")},document.head.appendChild(a)}function initBarba(){"undefined"!=typeof barba?(console.log("Initializing Barba.js transitions"),barba.init({debug:!0,transitions:[{name:"default-transition",leave:a=>new Promise((e=>{const t=a.current.container;t.classList.add("page-exit"),t.querySelector("#sidebar")&&t.querySelector("#sidebar").classList.contains("slide-left")&&t.querySelector("#sidebar").classList.remove("slide-left"),setTimeout(e,300)})),enter:a=>new Promise((e=>{const t=a.next.container;t.classList.add("page-enter"),setTimeout((()=>{if([{id:"headerContainer",path:"header.html"},{id:"sidebarContainer",path:"sidebar.html"},{id:"footerContainer",path:"footer.html"}].forEach((a=>{t.querySelector(`#${a.id}`)&&!t.querySelector(`#${a.id}`).innerHTML.trim()&&(console.log(`Loading partial ${a.path} after transition`),window.loadPartial(a.id,a.path))})),t.classList.remove("page-enter"),window.location.pathname.includes("projects.html")){console.log("Barba transition to projects page detected, checking if projects need initialization");const a=t.querySelector("#projectsGallery");if(a&&(!a.innerHTML||""===a.innerHTML.trim())){console.log("Projects gallery is empty, triggering initialization");const a=new CustomEvent("initializeProjects");document.dispatchEvent(a)}}e()}),300)}))}]}),barba.hooks.after((()=>{console.log("Barba after hook: ensuring partials are loaded"),[{id:"headerContainer",path:"header.html"},{id:"sidebarContainer",path:"sidebar.html"},{id:"footerContainer",path:"footer.html"}].forEach((a=>{const e=document.querySelector(`#${a.id}`);e&&!e.innerHTML.trim()&&(console.log(`Loading partial ${a.path} after Barba transition complete`),window.loadPartial(a.id,a.path))}))}))):console.error("Barba.js still not available after loading attempt.")}document.addEventListener("DOMContentLoaded",(()=>{"undefined"==typeof barba?(console.warn("Barba.js is not loaded. Loading it dynamically..."),loadBarba()):initBarba()})),window.loadPartial=async function(a,e){try{const t=await import("{basePath}/main.js");if(t&&"function"==typeof t.loadPartial)await t.loadPartial(a,e);else{console.log(`Fallback: Loading partial ${e} into ${a}`);const t=await fetch(`partials/${e}`,{cache:"no-store"});if(!t.ok)throw new Error(`Failed to load partial ${e}`);{const e=await t.text(),o=document.getElementById(a);o&&(o.innerHTML=e,setTimeout((()=>{o.classList.contains("slide-left")&&o.classList.remove("slide-left"),o.classList.add("loaded")}),100))}}}catch(t){console.error("Error in window.loadPartial:",t);const o=document.getElementById(a);o&&(o.innerHTML=`<div class="error-partial">Failed to load ${e}.</div>`)}};